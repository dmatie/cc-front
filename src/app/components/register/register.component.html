<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-lg border-0 fade-in">
        <div class="card-header text-white text-center py-4" 
             style="background: linear-gradient(135deg, var(--primary-color), var(--info-color));">
          <div class="d-flex align-items-center justify-content-center mb-3">
            <div class="bg-white bg-opacity-20 rounded-circle p-3 me-3">
              <i class="bi bi-person-plus" style="font-size: 2rem;"></i>
            </div>
            <div>
              <h3 class="mb-0">{{ i18n.t('register.title') }}</h3>
              <p class="mb-0 mt-2 opacity-75">{{ i18n.t('register.subtitle') }}</p>
            </div>
          </div>
        </div>
        
        <div class="card-body p-5">
          <!-- Étapes du processus -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="d-flex justify-content-between align-items-center">
                <div class="step-item text-center">
                  <div class="step-circle bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-2" 
                       style="width: 40px; height: 40px;">
                    <span class="fw-bold">1</span>
                  </div>
                  <small class="text-muted d-block">Formulaire</small>
                </div>
                <div class="step-line flex-grow-1 mx-3" style="height: 2px; background: #dee2e6;"></div>
                <div class="step-item text-center">
                  <div class="step-circle bg-light text-muted rounded-circle d-inline-flex align-items-center justify-content-center mb-2" 
                       style="width: 40px; height: 40px;">
                    <span class="fw-bold">2</span>
                  </div>
                  <small class="text-muted d-block">Validation</small>
                </div>
                <div class="step-line flex-grow-1 mx-3" style="height: 2px; background: #dee2e6;"></div>
                <div class="step-item text-center">
                  <div class="step-circle bg-light text-muted rounded-circle d-inline-flex align-items-center justify-content-center mb-2" 
                       style="width: 40px; height: 40px;">
                    <span class="fw-bold">3</span>
                  </div>
                  <small class="text-muted d-block">Approbation</small>
                </div>
              </div>
            </div>
          </div>

          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label fw-semibold">
                  <i class="bi bi-person me-1 text-primary"></i>{{ i18n.t('register.first_name') }} 
                  <span class="text-danger">*</span>
                </label>
                <input 
                  type="text" 
                  class="form-control form-control-lg" 
                  id="firstName"
                  formControlName="firstName"
                  placeholder="Votre prénom"
                  [class.is-invalid]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
                >
                <div class="invalid-feedback" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
                  {{ i18n.t('register.first_name') }} {{ i18n.t('common.required') }}
                </div>
              </div>
              
              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label fw-semibold">
                  <i class="bi bi-person me-1 text-primary"></i>{{ i18n.t('register.last_name') }} 
                  <span class="text-danger">*</span>
                </label>
                <input 
                  type="text" 
                  class="form-control form-control-lg" 
                  id="lastName"
                  formControlName="lastName"
                  placeholder="Votre nom"
                  [class.is-invalid]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
                >
                <div class="invalid-feedback" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
                  {{ i18n.t('register.last_name') }} {{ i18n.t('common.required') }}
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label fw-semibold">
                <i class="bi bi-envelope me-1 text-primary"></i>{{ i18n.t('register.email') }} 
                <span class="text-danger">*</span>
              </label>
              <input 
                type="email" 
                class="form-control form-control-lg" 
                id="email"
                formControlName="email"
                placeholder="votre.email@entreprise.com"
                [class.is-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              >
              <div class="invalid-feedback" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                <span *ngIf="registerForm.get('email')?.errors?.['required']">{{ i18n.t('register.email') }} {{ i18n.t('common.required') }}</span>
                <span *ngIf="registerForm.get('email')?.errors?.['email']">Format d'email invalide</span>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="company" class="form-label fw-semibold">
                  <i class="bi bi-building me-1 text-primary"></i>{{ i18n.t('register.company') }} 
                  <span class="text-danger">*</span>
                </label>
                <input 
                  type="text" 
                  class="form-control form-control-lg" 
                  id="company"
                  formControlName="company"
                  placeholder="Nom de votre entreprise"
                  [class.is-invalid]="registerForm.get('company')?.invalid && registerForm.get('company')?.touched"
                >
                <div class="invalid-feedback" *ngIf="registerForm.get('company')?.invalid && registerForm.get('company')?.touched">
                  {{ i18n.t('register.company') }} {{ i18n.t('common.required') }}
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="phone" class="form-label fw-semibold">
                  <i class="bi bi-telephone me-1 text-primary"></i>{{ i18n.t('register.phone') }} 
                  <span class="text-danger">*</span>
                </label>
                <input 
                  type="tel" 
                  class="form-control form-control-lg" 
                  id="phone"
                  formControlName="phone"
                  placeholder="+33 1 23 45 67 89"
                  [class.is-invalid]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
                >
                <div class="invalid-feedback" *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                  {{ i18n.t('register.phone') }} {{ i18n.t('common.required') }}
                </div>
              </div>
            </div>

            <div class="mb-4">
              <label for="businessJustification" class="form-label fw-semibold">
                <i class="bi bi-chat-text me-1 text-primary"></i>{{ i18n.t('register.business_justification') }} 
                <span class="text-danger">*</span>
              </label>
              <textarea 
                class="form-control form-control-lg" 
                id="businessJustification"
                formControlName="businessJustification"
                rows="4"
                [placeholder]="i18n.t('register.business_justification_placeholder')"
                [class.is-invalid]="registerForm.get('businessJustification')?.invalid && registerForm.get('businessJustification')?.touched"
              ></textarea>
              <div class="form-text">
                <i class="bi bi-info-circle me-1"></i>
                Minimum 20 caractères requis
              </div>
              <div class="invalid-feedback" *ngIf="registerForm.get('businessJustification')?.invalid && registerForm.get('businessJustification')?.touched">
                {{ i18n.t('register.business_justification') }} {{ i18n.t('common.required') }} (minimum 20 caractères)
              </div>
            </div>

            <div class="d-grid gap-2 mb-4">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg"
                [disabled]="registerForm.invalid || isSubmitting"
                style="padding: 1rem 2rem;"
              >
                <span *ngIf="isSubmitting" class="loading-spinner me-2"></span>
                <i class="bi bi-send me-2" *ngIf="!isSubmitting"></i>
                {{ isSubmitting ? i18n.t('register.submitting') : i18n.t('register.submit') }}
              </button>
            </div>

            <div class="text-center">
              <p class="text-muted mb-0">
                {{ i18n.t('register.already_account') }}
                <a href="/home" class="text-decoration-none fw-semibold"> {{ i18n.t('common.back_home') }}</a>
              </p>
            </div>
          </form>
        </div>
      </div>

      <!-- Message de succès -->
      <div class="alert alert-success mt-4 fade-in" *ngIf="showSuccessMessage">
        <div class="d-flex align-items-center">
          <div class="bg-success bg-opacity-20 rounded-circle p-3 me-3">
            <i class="bi bi-check-circle text-success" style="font-size: 1.5rem;"></i>
          </div>
          <div>
            <h5 class="alert-heading mb-2">{{ i18n.t('register.success_title') }}</h5>
            <p class="mb-0">{{ i18n.t('register.success') }}</p>
          </div>
        </div>
      </div>

      <!-- Informations sur le processus -->
      <div class="card mt-4 border-0 bg-light">
        <div class="card-body p-4">
          <h6 class="text-primary mb-3">
            <i class="bi bi-clock-history me-2"></i>
            Que se passe-t-il après votre demande ?
          </h6>
          <div class="row g-3">
            <div class="col-md-4">
              <div class="d-flex align-items-start">
                <div class="bg-primary bg-opacity-10 rounded-circle p-2 me-3 mt-1">
                  <i class="bi bi-eye text-primary"></i>
                </div>
                <div>
                  <h6 class="mb-1">Examen</h6>
                  <small class="text-muted">Votre demande est examinée par notre équipe</small>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex align-items-start">
                <div class="bg-warning bg-opacity-10 rounded-circle p-2 me-3 mt-1">
                  <i class="bi bi-person-check text-warning"></i>
                </div>
                <div>
                  <h6 class="mb-1">Validation</h6>
                  <small class="text-muted">Vérification des informations fournies</small>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex align-items-start">
                <div class="bg-success bg-opacity-10 rounded-circle p-2 me-3 mt-1">
                  <i class="bi bi-envelope-check text-success"></i>
                </div>
                <div>
                  <h6 class="mb-1">Notification</h6>
                  <small class="text-muted">Réception d'un email de confirmation</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>